<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ALYSSIUN — Client Intake Form</title>
<meta name="description" content="Tell us about your project so ALYSSIUN can prepare a tailored proposal and estimate." />
<link rel="icon" type="image/png" href="assets/favicon-alyssiun.png" />
<style>
  :root{
    --bg:#0b0f14; --bg2:#0e141f; --card:#111826; --ink:#e8eef7; --muted:#a6b3c7;
    --acc:#4dd3ff; --ok:#36d399; --shadow:rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:linear-gradient(180deg,var(--bg),var(--bg2));color:var(--ink);
            font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .container{width:min(980px,92%);margin:0 auto}
  header{padding:30px 0;border-bottom:1px solid #152033}
  .brand{display:flex;align-items:center;gap:12px}
  .brand img{height:36px}
  h1{font-size:clamp(22px,4vw,34px);color:var(--acc);margin:10px 0 6px}
  p.lead{color:var(--muted);margin:0 0 24px}
  form{background:var(--card);border:1px solid #1a2436;border-radius:16px;padding:22px;
       box-shadow:0 10px 30px var(--shadow);margin:24px 0 40px}
  fieldset{border:1px solid #1a2436;border-radius:14px;padding:16px;margin:14px 0}
  legend{padding:0 8px;color:#cfe8ff}
  label{display:block;font-weight:600;margin:14px 0 6px}
  input, select, textarea{
    width:100%;padding:12px 12px;border-radius:10px;border:1px solid #223048;background:#0f1520;color:var(--ink)
  }
  textarea{min-height:120px;resize:vertical}
  .grid{display:grid;gap:14px}
  .row-2{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
  .pill{display:inline-block;padding:6px 10px;border:1px solid #1a2436;border-radius:999px;
        background:#0f1520;color:#9fb0c7;font-size:.9rem}
  .btn{display:inline-block;padding:12px 20px;border-radius:12px;background:var(--acc);color:#001018;
       font-weight:800;box-shadow:0 8px 24px var(--shadow);border:0;cursor:pointer}
  .btn.alt{background:transparent;color:var(--ink);border:1px solid #243042}
  .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
  .small{font-size:.9rem;color:#9fb0c7}
  .success,.error{margin-top:12px;padding:10px 14px;border-radius:10px}
  .success{background:#0f2a1e;color:#d2ffe9;border:1px solid #1a3d2f}
  .error{background:#2a1111;color:#ffd2d2;border:1px solid #3d1a1a}
</style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <img src="assets/logo-alyssiun.svg" alt="ALYSSIUN">
        <span class="pill">Client Intake</span>
      </div>
      <h1>Tell us what you need</h1>
      <p class="lead">Answer a few questions so ALYSSIUN can scope your project and send a clear estimate.</p>
    </div>
  </header>

  <main class="container">
    <form id="intakeForm">
      <!-- 1. Company Info -->
      <fieldset>
        <legend>Company</legend>
        <div class="grid row-2">
          <div>
            <label for="company">Company name *</label>
            <input id="company" name="company" required />
          </div>
          <div>
            <label for="industry">Industry *</label>
            <select id="industry" name="industry" required>
              <option value="">Select…</option>
              <option>Manufacturing</option>
              <option>Energy</option>
              <option>Maritime</option>
              <option>Construction</option>
              <option>Logistics</option>
              <option>Other</option>
            </select>
          </div>
          <div>
            <label for="contactName">Contact person *</label>
            <input id="contactName" name="contactName" required />
          </div>
          <div>
            <label for="role">Role / Title</label>
            <input id="role" name="role" />
          </div>
          <div>
            <label for="email">Email *</label>
            <input id="email" type="email" name="email" required />
          </div>
          <div>
            <label for="phone">Phone / WhatsApp</label>
            <input id="phone" name="phone" />
          </div>
        </div>
      </fieldset>

      <!-- 2. Goals -->
      <fieldset>
        <legend>Goals</legend>
        <label for="challenges">What challenges are you facing?</label>
        <textarea id="challenges" name="challenges" placeholder="Downtime, safety training, siloed data, etc."></textarea>

        <label>What outcomes are you aiming for? (select all that apply)</label>
        <div class="grid row-2">
          <label><input type="checkbox" name="outcomes" value="Reduce downtime"> Reduce downtime</label>
          <label><input type="checkbox" name="outcomes" value="Improve training"> Improve training</label>
          <label><input type="checkbox" name="outcomes" value="Optimize production/logistics"> Optimize production/logistics</label>
          <label><input type="checkbox" name="outcomes" value="Safer operations"> Safer operations</label>
          <label><input type="checkbox" name="outcomes" value="Remote collaboration"> Remote collaboration</label>
          <label><input type="checkbox" name="outcomes" value="Other"> Other</label>
        </div>
      </fieldset>

      <!-- 3. Scope -->
      <fieldset>
        <legend>Scope of Work</legend>
        <label>Which solutions interest you? (select all that apply)</label>
        <div class="grid row-2">
          <label><input type="checkbox" name="solutions" value="Digital Twin"> Digital Twin</label>
          <label><input type="checkbox" name="solutions" value="AI Analytics / Predictive Maintenance"> AI Analytics / Predictive Maintenance</label>
          <label><input type="checkbox" name="solutions" value="VR/AR Training"> VR/AR Training</label>
          <label><input type="checkbox" name="solutions" value="Collaboration Hub"> Collaboration Hub</label>
          <label><input type="checkbox" name="solutions" value="IoT / Data Integration"> IoT / Data Integration</label>
        </div>

        <label for="scale">Project scale *</label>
        <select id="scale" name="scale" required>
          <option value="">Select…</option>
          <option>Pilot / Prototype</option>
          <option>Mid-scale (single facility or department)</option>
          <option>Enterprise (multi-site / global)</option>
        </select>
      </fieldset>

      <!-- 4. Tech -->
      <fieldset>
        <legend>Technical Environment</legend>
        <div class="grid row-2">
          <div>
            <label for="platforms">Platforms (check all that apply)</label>
            <div class="grid row-2">
              <label><input type="checkbox" name="platforms" value="Web"> Web (browser)</label>
              <label><input type="checkbox" name="platforms" value="Desktop"> Desktop (Windows/Mac)</label>
              <label><input type="checkbox" name="platforms" value="VR"> VR Headsets</label>
              <label><input type="checkbox" name="platforms" value="AR"> AR Glasses</label>
            </div>
          </div>
          <div>
            <label for="iot">Do you have IoT / data sources?</label>
            <select id="iot" name="iot">
              <option>Yes</option><option>No</option><option>Not sure</option>
            </select>
          </div>
          <div>
            <label for="dataNotes">Data details (sources, formats, cadence)</label>
            <textarea id="dataNotes" name="dataNotes" placeholder="PLCs, MQTT, OPC UA, CSV, REST APIs, etc."></textarea>
          </div>
        </div>
      </fieldset>

      <!-- 5. Timeline & Budget -->
      <fieldset>
        <legend>Timeline & Budget</legend>
        <div class="grid row-2">
          <div>
            <label for="startDate">Expected start date</label>
            <input id="startDate" name="startDate" type="month" />
          </div>
          <div>
            <label for="duration">Desired duration</label>
            <select id="duration" name="duration">
              <option>1–3 months</option><option>3–6 months</option>
              <option>6–12 months</option><option>Ongoing</option>
            </select>
          </div>
          <div>
            <label for="budget">Budget range</label>
            <select id="budget" name="budget">
              <option>Under $10K (pilot/demo)</option>
              <option>$10K–$50K</option>
              <option>$50K–$200K</option>
              <option>$200K+</option>
            </select>
          </div>
        </div>
      </fieldset>

      <!-- 6. Notes -->
      <fieldset>
        <legend>Additional Notes</legend>
        <label for="notes">Specific requirements, ideas, or references</label>
        <textarea id="notes" name="notes" placeholder="Links to videos, CAD/BIM, existing training docs, etc."></textarea>
      </fieldset>

      <!-- Hidden system fields (auto-captured) -->
      <input type="hidden" id="pageUrl" name="pageUrl" />
      <input type="hidden" id="utm" name="utm" />

      <div class="actions">
        <button class="btn" type="submit">Submit Request</button>
        <a class="btn alt" href="https://wa.me/19174031764" target="_blank" rel="noopener">Or WhatsApp Us</a>
      </div>

      <div id="msg" class="small"></div>
    </form>
  </main>

<script>
/* ---- capture page & UTM ---- */
document.getElementById('pageUrl').value = location.href;
const params = new URLSearchParams(location.search);
document.getElementById('utm').value = params.toString();

/* ---- submission handler ----
   Choose ONE receiver:
   A) FORMEE (email) — set FORMSPREE_ENDPOINT
   B) Airtable (CRM) — set AIRTABLE_TOKEN, BASE_ID, TABLE_NAME
   You can enable both.
*/
const FORMSPREE_ENDPOINT = "https://formspree.io/f/YOUR_FORMSPREE_ID"; // <-- replace
const AIRTABLE_TOKEN = "";   // e.g. "patXXXXXXXXXXXX"
const BASE_ID = "";          // e.g. "appXXXXXXXXXXXX"
const TABLE_NAME = "Leads";  // create this in Airtable

async function postFormspree(payload) {
  if (!FORMSPREE_ENDPOINT || FORMSPREE_ENDPOINT.includes("YOUR_FORMSPREE_ID")) return {skipped:true};
  const resp = await fetch(FORMSPREE_ENDPOINT, {
    method: "POST",
    headers: {"Accept":"application/json"},
    body: new FormData(document.getElementById("intakeForm"))
  });
  return resp.ok ? {ok:true} : {ok:false, status:resp.status};
}

async function postAirtable(payload) {
  if (!AIRTABLE_TOKEN || !BASE_ID || !TABLE_NAME) return {skipped:true};
  const url = `https://api.airtable.com/v0/${BASE_ID}/${encodeURIComponent(TABLE_NAME)}`;
  const resp = await fetch(url, {
    method: "POST",
    headers: {
      "Authorization": `Bearer ${AIRTABLE_TOKEN}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ records: [ { fields: payload } ] })
  });
  return resp.ok ? {ok:true} : {ok:false, status:resp.status};
}

function collectPayload(form) {
  const fd = new FormData(form);
  // For multi-select checkboxes, join values
  const join = name => (fd.getAll(name) || []).join(", ");
  return {
    Company: fd.get("company") || "",
    Industry: fd.get("industry") || "",
    "Contact Name": fd.get("contactName") || "",
    Role: fd.get("role") || "",
    Email: fd.get("email") || "",
    Phone: fd.get("phone") || "",
    Challenges: fd.get("challenges") || "",
    Outcomes: join("outcomes"),
    Solutions: join("solutions"),
    Scale: fd.get("scale") || "",
    Platforms: join("platforms"),
    "Has IoT/Data": fd.get("iot") || "",
    "Data Notes": fd.get("dataNotes") || "",
    "Start Date": fd.get("startDate") || "",
    Duration: fd.get("duration") || "",
    Budget: fd.get("budget") || "",
    Notes: fd.get("notes") || "",
    "Page URL": fd.get("pageUrl") || "",
    UTM: fd.get("utm") || ""
  };
}

document.getElementById("intakeForm").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const form = e.currentTarget;
  const msg = document.getElementById("msg");
  msg.className = "small"; msg.textContent = "Submitting…";

  const payload = collectPayload(form);

  // Send to Formspree (email)
  let fs = await postFormspree(payload);
  // Send to Airtable (CRM)
  let at = await postAirtable(payload);

  if ((fs.ok || fs.skipped) && (at.ok || at.skipped)) {
    msg.className = "success";
    msg.textContent = "Thanks! Your request has been received. We’ll contact you shortly.";
    form.reset();
  } else {
    msg.className = "error";
    msg.textContent = "Something went wrong submitting the form. Please try again or WhatsApp us.";
  }
});
</script>
</body>
</html>
